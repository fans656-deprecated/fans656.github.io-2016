
<html>
  <head>
      <style>
        body {
          font-family: 'Courier New';
          font-size: 0.875em;
        };
      </style>
  </head>
  <body>
    <p>2016-05-15&nbsp;08:15:27<br>
准备搭一个个人的技术博客。是的，晓得有不少现成的工具可用(WordPress、github.io、Jekyll等等)，但自己还是想先从零开始尝试一下；之后再去参照这些工具，就更能理解个中技术的来龙去脉(就像当初学设计模式，因为自己确实在实际的开发中遇到过痛点，所以看到一个正好用来解决某个痛点的模式时就更能理解和印象深刻)<br>
想要采用的大抵技术路线如下：<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;本地&nbsp;python&nbsp;+&nbsp;git&nbsp;将&nbsp;txt&nbsp;文件转换为&nbsp;html<br>
&nbsp;&nbsp;&nbsp;&nbsp;上传至远程&nbsp;git&nbsp;repo<br>
&nbsp;&nbsp;&nbsp;&nbsp;服务器&nbsp;pull&nbsp;下来更新了的&nbsp;repo，更新网站<br>
<br>
不用&nbsp;github.io&nbsp;是因为将来想有评论功能，而&nbsp;g&nbsp;只能做静态页面<br>
本地&nbsp;txt&nbsp;-&gt;&nbsp;html&nbsp;的功能大抵是&nbsp;Jekyll&nbsp;的功能，自己试着造个轮子<br>
服务器如果找不到好的就用自己的&nbsp;Bandwagon&nbsp;VPS&nbsp;吧<br>
now,&nbsp;let&nbsp;the&nbsp;coding&nbsp;begin...<br>
<br>
2016-05-15&nbsp;08:43:32<br>
写起来就会发现具体的功能要求，比如从txt到html的转义问题：<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;左右尖括号这种需要转义成&nbsp;&lt;&nbsp;等<br>
&nbsp;&nbsp;&nbsp;&nbsp;txt中的换行不加处理的话，在html中显示出来就是一坨，需要加&nbsp;&lt;br&gt;<br>
<br>
2016-05-15&nbsp;08:50:40<br>
输出html的文件夹，目前是每次输出都删掉重新建一个，发现<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;shutil.rmtree()<br>
&nbsp;&nbsp;&nbsp;&nbsp;os.mkdir()<br>
<br>
有时候会在&nbsp;mkdir&nbsp;时&nbsp;Permission&nbsp;denied<br>
<br>
http://stackoverflow.com/questions/16373747/permission-denied-doing-os-mkdird-after-running-shutil-rmtreed-in-python<br>
这里说了这个问题<br>
总的来说就是&nbsp;windows&nbsp;删除文件可能是&nbsp;asynchronous&nbsp;的<br>
所以解决办法么，就是&nbsp;retry&nbsp;with&nbsp;a&nbsp;delay<br>
<br>
2016-05-15&nbsp;09:16:45<br>
好了，输出差不多了——差不多的意思其实只是有了可用的功能，效果上嘛，等整个流程走通了，再去雕琢细节<br>
<br>
2016-05-15&nbsp;09:25:56<br>
刚才说上传的流程中利用&nbsp;git&nbsp;，为什么要用它呢？琢磨了一下，发觉主要是用它的&nbsp;diff&nbsp;功能——增量更新；否则如果直接给服务器上传的话，内容一多，每次都传所有内容是比较浪费的，而且没备案的东西直接明文在网上跑也怕VPS被封掉<br>
<br>
2016-05-15&nbsp;09:48:23<br>
git&nbsp;nested&nbsp;repo&nbsp;比较麻烦，琢磨怎么绕过去，，最暴力的方法当然是把输出放到一个没有&nbsp;parent&nbsp;repo&nbsp;的地方<br>
<br>
2016-05-15&nbsp;10:01:25<br>
local&nbsp;repo&nbsp;commit&nbsp;搞定了，下来想想怎么弄服务器那边<br>
<br>
2016-05-15&nbsp;11:04:35<br>
发现部署是个问题..&nbsp;这相当于建站了<br>
自己这个设定相当于整个网站其实是放在一个&nbsp;repo&nbsp;里的<br>
&nbsp;&nbsp;&nbsp;&nbsp;repo/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content/&nbsp;&nbsp;&nbsp;#&nbsp;posts&nbsp;of&nbsp;txt<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output/&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;the&nbsp;site<br>
现在用flask的话，其实很多部分是静态页面，应该直接用apache来server<br>
但是只用apache也不行，以后还会有动态的内容<br>
所以..&nbsp;看样子得学学apache<br>
<br>
2016-05-15&nbsp;12:30:20<br>
vps&nbsp;上跑的是&nbsp;centos，因为翻墙的缘故&nbsp;putty&nbsp;ssh&nbsp;比较慢<br>
所以开个虚拟机学&nbsp;apache，虚拟机上跑的是&nbsp;ubuntu<br>
两个发行版的&nbsp;apache&nbsp;有些配置细节不一样，但大同小异都可以&nbsp;google<br>
</p>
  </body>
</html>
